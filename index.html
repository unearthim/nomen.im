<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- === 1. Primary Meta Tags === -->
    <title>nomen.im | A Ceremony for Your Name</title>
    <meta name="title" content="nomen.im | A Ceremony for Your Name">
    <meta name="description" content="A simple, interactive ceremony to reflect on the meaning and power of your name, reminding you that it is a masterpiece.">
    <meta name="keywords" content="name, identity, meaning of name, self-reflection, interactive experience, personal story, what is my name">
    <meta name="author" content="nomen.im (An unearth.im Project)">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="English">
    
    <!-- === Canonical Link === -->
    <link rel="canonical" href="https://nomen.im/" />
 
    <!-- === 2. Webmention Endpoint === -->
    <link rel="webmention" href="https://webmention.io/unearth.im/webmention" />

    <!-- === 3. Open Graph / Facebook === -->
    <meta property="og:type" content="website"> 
    <meta property="og:url" content="https://nomen.im/">
    <meta property="og:title" content="nomen.im | A Ceremony for Your Name">
    <meta property="og:description" content="A simple, interactive ceremony to reflect on the meaning and power of your name, reminding you that it is a masterpiece.">
    <meta property="og:image" content="https://nomen.im/og-image.png">
    <meta property="og:site_name" content="nomen.im">

    <!-- === 4. Twitter Card === -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://nomen.im/">
    <meta property="twitter:title" content="nomen.im | A Ceremony for Your Name">
    <meta property="twitter:description" content="A simple, interactive ceremony to reflect on the meaning and power of your name, reminding you that it is a masterpiece.">
    <meta property="twitter:image" content="https://nomen.im/og-image.png">

    <!-- === 5. Favicons & Theme === -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="alternate icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#0A0E1B">
    <meta name="msapplication-TileColor" content="#FF8A00">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* "Dusk & Vellum" palette */
            --bg-color: #0A0E1B; /* Deep Navy */
            --text-color: #F8F7F4; /* Off-White / Vellum */
            --accent-color: #FF8A00; /* Luminous Ember */
            --meta-text-color: #a0a0a0; /* Softer Gray */
            --input-border-color: #4a4a4a;
            --total-phrases: 20;
            --phrase-duration: 2s;
            --animation-total-duration: calc(var(--total-phrases) * var(--phrase-duration));
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Lora', serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow: hidden;
            background-color: var(--bg-color);
            transition: background 2s ease-in-out;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
            text-align: center;
            padding: 2rem;
            box-sizing: border-box;
            background: radial-gradient(circle at 70% 30%, hsla(220, 50%, 15%, 0.8), var(--bg-color) 60%);
        }

        .content-wrapper {
            max-width: 900px;
            width: 100%;
            transition: opacity 1s ease-in-out;
        }
        
        .name-display {
            font-size: clamp(3rem, 10vw, 6rem);
            font-weight: 500;
            line-height: 1.2;
            color: var(--text-color);
            margin-bottom: 2rem;
            min-height: 100px;
            transition: opacity 1s ease-in-out, color 1s ease-in-out;
        }
        
        .name-display.submitted:hover {
            cursor: pointer;
            opacity: 0.8;
        }
        
        .prompt, .affirmation {
            font-family: 'Inter', sans-serif;
            font-size: 1.1rem;
            color: var(--meta-text-color);
            margin-bottom: 1.5rem;
            transition: opacity 1s ease-in-out;
        }

        .name-input-wrapper {
            position: relative;
        }

        #name-input {
            width: 100%;
            max-width: 400px;
            font-family: 'Inter', sans-serif;
            font-size: 1.5rem;
            text-align: center;
            border: none;
            border-bottom: 2px solid var(--input-border-color);
            background: transparent;
            color: var(--text-color);
            padding: 0.5rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        #name-input:focus {
            border-bottom-color: var(--accent-color);
        }

        .affirmation-container {
            min-height: 50px;
            position: relative; /* Needed for absolute positioning of children */
        }
        
        .affirmation-text {
            /* THIS IS THE FIX: Explicitly setting the color */
            color: var(--meta-text-color);
            font-family: 'Inter', sans-serif;
            font-size: 1.1rem;
            position: absolute;
            width: 100%;
            left: 0;
            opacity: 0;
            animation: fade-cycle var(--animation-total-duration) linear infinite;
        }
        
        /* Stagger the animation for each phrase */
        /* JS will now add these dynamically */

        @keyframes fade-cycle {
            /* Each phrase is visible for 5% of the total duration */
            0%   { opacity: 0; }
            2.5% { opacity: 1; }
            5%   { opacity: 1; }
            7.5% { opacity: 0; }
            100% { opacity: 0; }
        }

        .logo {
            position: absolute;
            top: 25px;
            left: 30px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--meta-text-color);
            letter-spacing: 0.5px;
            text-decoration: none;
        }
        
        .logo span {
            color: var(--accent-color);
        }

    </style>
</head>
<body>

    <a href="https://unearth.im" target="_blank" class="logo">nomen<span>.im</span></a>

    <div class="container" id="container">
        <div class="content-wrapper" id="content-wrapper">
            <div class="name-display" id="name-display">Aurelia</div>
            <div class="prompt" id="prompt-container">
                <p>What is your name?</p>
                <div class="name-input-wrapper">
                    <input type="text" id="name-input" autocomplete="off" maxlength="30">
                </div>
            </div>
            <div class="affirmation-container" id="affirmation-container" style="display: none;">
                <!-- Affirmations will be added here by JS -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const nameInput = document.getElementById('name-input');
            const nameDisplay = document.getElementById('name-display');
            const promptContainer = document.getElementById('prompt-container');
            const affirmationContainer = document.getElementById('affirmation-container');
            const container = document.getElementById('container');

            const affirmations = [
                "It is the first gift you are given.", "It is a sound that means 'you'.", "It is a thread in a story.", 
                "It is a word with a heartbeat.", "It is the anchor of your identity.", "It is the title of your story.", 
                "It is a promise whispered at birth.", "It is the first word you owned.", "It is a bridge to your ancestors.", 
                "It is a map of your becoming.", "It is a song only you can hear.", "It is a vessel for your legacy.", 
                "It is a signature on the world.", "It is the beginning of your poem.", "It is a key to being known.", 
                "It is a constellation of letters.", "It is a single word, holding worlds.", "It is the echo of your existence.", 
                "It is a word spoken with love.", "It is a spell for summoning yourself.", "It is the first piece of your personal myth.", 
                "It is a sound that shapes the air.", "It is a word that carries your history.", "It is the handle by which the world holds you.", 
                "It is a seed planted in the soil of your life.", "It is a quiet hum beneath all you do.", "It is a word that holds your potential.", 
                "It is a banner flown from the castle of your self.", "It is a name for a masterpiece: you."
            ];

            let isSubmitted = false;

            // Populate affirmations and set animation delays
            const phraseDuration = 2; // in seconds
            const totalPhrases = affirmations.length;
            const animationTotalDuration = totalPhrases * phraseDuration;
            
            // Set CSS variables for JS access
            document.documentElement.style.setProperty('--total-phrases', totalPhrases);
            document.documentElement.style.setProperty('--phrase-duration', `${phraseDuration}s`);

            affirmations.forEach((text, index) => {
                const p = document.createElement('p');
                p.textContent = text;
                p.className = 'affirmation-text';
                p.style.animationDelay = `${index * phraseDuration}s`;
                affirmationContainer.appendChild(p);
            });


            function generateSeed(str) {
                let hash = 0;
                if (str.length === 0) return hash;
                for (let i = 0; i < str.length; i++) {
                    const char = str.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash |= 0; 
                }
                return Math.abs(hash);
            }

            function updateVisuals(name) {
                const seed = generateSeed(name);
                const hue1 = seed % 360;
                const hue2 = (hue1 + 120) % 360; 
                
                const gradient = `radial-gradient(circle at 70% 30%, hsla(${hue1}, 50%, 15%, 0.7), var(--bg-color) 60%), radial-gradient(circle at 30% 70%, hsla(${hue2}, 50%, 15%, 0.7), var(--bg-color) 60%)`;
                container.style.background = gradient;
            }
            
            function resetCeremony() {
                isSubmitted = false;
                nameDisplay.classList.remove('submitted');
                
                affirmationContainer.style.opacity = '0';
                nameDisplay.style.opacity = '0';

                setTimeout(() => {
                    affirmationContainer.style.display = 'none';
                    promptContainer.style.display = 'block';
                    
                    nameInput.value = '';
                    nameDisplay.textContent = 'Aurelia';
                    container.style.background = `radial-gradient(circle at 70% 30%, hsla(220, 50%, 15%, 0.8), var(--bg-color) 60%)`;
                    
                    setTimeout(() => {
                        promptContainer.style.opacity = '1';
                        nameDisplay.style.opacity = '1';
                        nameInput.focus();
                    }, 50);

                }, 1000);
            }

            nameInput.addEventListener('input', () => {
                const name = nameInput.value;
                if (name.trim() === '') {
                    nameDisplay.textContent = 'Aurelia';
                    container.style.background = `radial-gradient(circle at 70% 30%, hsla(220, 50%, 15%, 0.8), var(--bg-color) 60%)`;
                } else {
                    nameDisplay.textContent = name;
                    updateVisuals(name);
                }
            });

            nameInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && nameInput.value.trim() !== '' && !isSubmitted) {
                    isSubmitted = true;
                    promptContainer.style.opacity = '0';
                    
                    setTimeout(() => {
                        promptContainer.style.display = 'none';
                        affirmationContainer.style.display = 'block';
                        affirmationContainer.style.opacity = '1';
                        nameDisplay.classList.add('submitted');
                    }, 1000);
                }
            });
            
            nameDisplay.addEventListener('click', () => {
                if (isSubmitted) {
                    resetCeremony();
                }
            });

            nameInput.focus();
        });
    </script>
</body>
</html>
